<html><head>
    <link rel="stylesheet" href="css/submarine-teacher.css">
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="js/ace/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/ace/theme-monokai.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/ace/mode-css.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
<div id="left-col">
    <div class="panel"></div>
    <div class="panel"></div>
    <div class="panel"></div>
</div>
<div id="right-col">
    <div class="panel"></div>
    <div class="panel"></div>
    <div class="panel"></div>
</div>
<div id="middle-col">
    <canvas id="vision" class="panel"></canvas>
    <div id="ctr-panel">
        <div class="button-panel">
            <div id="auto-button" class="green button pressed">Auto-Pilot</div>
        </div>
        <div class="button-panel">
            <div id="lesson-button" class="green button">Lessons</div>
        </div>
    </div>
    <div class="monitor">
        <div class="screen">
            <div id="lesson"></div>
        </div>
    </div>
    <div id="editor-panel" class="monitor hidden">
        <div class="screen">
            <div id="editor"></div>
        </div>
    </div>
    <div id="transmit-panel" class="button-panel hidden">
        <div id="transmit-button" class="red button">Execute</div>
    </div>
    <div id="auto-panel" class="monitor">
        <div class="button-panel up">
            <div class="arrow-up"></div>
        </div>
        <div class="button-panel left">
            <div class="arrow-left"></div>
        </div>
        <div class="button-panel right">
            <div class="arrow-right"></div>
        </div>
        <div class="button-panel down">
            <div class="arrow-down"></div>
        </div>
        <div class="button-panel surface">
            <div class="arrow-surface"></div>
        </div>
        <div class="button-panel dive">
            <div class="arrow-dive"></div>
        </div>
    </div>
</div>
<script type="text/javascript" src="streamer/jsmpg.js"></script>
<script src="js/submarine-factory.js" type="text/javascript" charset="utf-8"></script>
<script src="js/submarine-teacher.js" type="text/javascript" charset="utf-8"></script>
</body>
<script>
    // Setup the WebSocket connection and start the player

    var client = new WebSocket('ws://52.37.12.182:8084/' );
    var canvas = document.getElementById('vision');
    var player = new jsmpeg(client, {canvas:canvas});

    var lessonEditor = ace.edit("lesson");
    lessonEditor.setTheme("ace/theme/monokai");
    lessonEditor.getSession().setUseWrapMode(true)
    lessonEditor.session.setMode("ace/mode/javascript");
    lessonEditor.setShowPrintMargin(false);
    lessonEditor.renderer.setShowGutter(false);
    lessonEditor.setOptions({
        highlightActiveLine: false,
        readOnly: true
    });

    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/monokai");
    editor.getSession().setUseWrapMode(true)
    editor.session.setMode("ace/mode/javascript");
    editor.setShowPrintMargin(false);

    var teacher = Teacher.Create(lessonEditor);
    teacher.nextLesson();

    $(function(){
        $("#transmit-button").click(function(){
            teacher.execute(editor.getValue());
        });
    });

    var $autoBtn = $('#auto-button');
    var $lessonBtn = $('#lesson-button');
    var $editor = $('#editor-panel');
    var $autoPanel = $('#auto-panel');
    var $transmitPanel = $("#transmit-panel");

    $("#auto-button,#lesson-button").mousedown( function() {
        $autoBtn.toggleClass("pressed");
        $lessonBtn.toggleClass("pressed");

        $editor.toggleClass("hidden");
        $autoPanel.toggleClass("hidden")
        $transmitPanel.toggleClass("hidden");
    });

</script>
</html>

